From fe1cb845a77c81114906cac5e0cf09b08e036b5a Mon Sep 17 00:00:00 2001
From: Romain Pokrzywka <romain.pokrzywka@kdab.com>
Date: Sun, 15 Jan 2012 23:55:43 -0600
Subject: Fix build when QT_NO_CURSOR is defined

---
 tools/designer/src/lib/shared/filterwidget.cpp   |    2 ++
 tools/designer/src/lib/shared/previewmanager.cpp |    8 ++++++++
 2 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/tools/designer/src/lib/shared/filterwidget.cpp b/tools/designer/src/lib/shared/filterwidget.cpp
index dcd8561..e74720b 100644
--- a/tools/designer/src/lib/shared/filterwidget.cpp
+++ b/tools/designer/src/lib/shared/filterwidget.cpp
@@ -72,7 +72,9 @@ HintLineEdit::HintLineEdit(QWidget *parent) :
 IconButton::IconButton(QWidget *parent)
     : QToolButton(parent)
 {
+#ifndef QT_NO_CURSOR
     setCursor(Qt::ArrowCursor);
+#endif
 }
 
 void IconButton::paintEvent(QPaintEvent *)
diff --git a/tools/designer/src/lib/shared/previewmanager.cpp b/tools/designer/src/lib/shared/previewmanager.cpp
index e5e22cb..1cec036 100644
--- a/tools/designer/src/lib/shared/previewmanager.cpp
+++ b/tools/designer/src/lib/shared/previewmanager.cpp
@@ -281,7 +281,9 @@ void PreviewDeviceSkin::slotDirection(QAction *a)
     const Qt::Orientation newOrientation = newDirection == DirectionUp ? Qt::Vertical : Qt::Horizontal;
     const Qt::Orientation oldOrientation = m_direction  == DirectionUp ? Qt::Vertical : Qt::Horizontal;
     m_direction = newDirection;
+#ifndef QT_NO_CURSOR
     QApplication::setOverrideCursor(Qt::WaitCursor);
+#endif
     if (oldOrientation != newOrientation) {
         QSize size = screenSize();
         if (newOrientation == Qt::Horizontal)
@@ -289,7 +291,9 @@ void PreviewDeviceSkin::slotDirection(QAction *a)
         fitWidget(size);
     }
     setTransform(skinTransform());
+#ifndef QT_NO_CURSOR
     QApplication::restoreOverrideCursor();
+#endif
 }
 
 void PreviewDeviceSkin::fitWidget(const QSize &size)
@@ -408,10 +412,14 @@ void ZoomablePreviewDeviceSkin::setZoomPercent(int zp)
     if (m_zoomMenu->zoom() != zp)
         m_zoomMenu->setZoom(zp);
 
+#ifndef QT_NO_CURSOR
     QApplication::setOverrideCursor(Qt::WaitCursor);    
+#endif
     m_zoomWidget->setZoom(zp);
     setTransform(skinTransform());
+#ifndef QT_NO_CURSOR
     QApplication::restoreOverrideCursor();
+#endif
 }
 
 void ZoomablePreviewDeviceSkin::populateContextMenu(QMenu *menu)
-- 
1.7.4.1

